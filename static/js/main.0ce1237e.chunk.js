(this["webpackJsonptask-board"]=this["webpackJsonptask-board"]||[]).push([[0],{130:function(e,t,a){e.exports=a(144)},139:function(e,t,a){},144:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(16),c=a.n(o),i=a(195),l=a(203),s=a(53),u=(a(139),a(18)),d=a(24),m=a(26),b=a(52),p=a(178),f=a(185),g=a(186),E=a(183),k=a(85),v=a(184),y=a(109),h=a.n(y),O=a(110),j=a.n(O),S=a(199),x=a(77),C=a.n(x),w=a(76),T=a.n(w),A=a(197),N=a(182),I=a(198),D=a(107),V=a.n(D),B=Object(p.a)({resize:{fontSize:35}}),z=function(e){var t=B();return e.isEdit?r.a.createElement("div",null,r.a.createElement(A.a,{id:"task-input-title",onChange:function(t){e.setTitle(t.target.value)},required:!0,fullWidth:!0,label:"Title",value:e.title,InputProps:{classes:{input:t.resize}}}),e.showError?r.a.createElement(N.a,{error:!0,"data-cy":"title-error-text"},"Title is a required field."):null):r.a.createElement(I.a,{display:"flex"},r.a.createElement(k.a,{align:"left","data-cy":"task-title",variant:"h4"},e.title),r.a.createElement(E.a,{"data-cy":"edit",onClick:function(){return e.setIsEdit(!0)}},r.a.createElement(V.a,null)))},L=a(206),_=a(200),K=a(204),W=function(e){return r.a.createElement(K.a,{className:"task-category",label:e.title,style:{backgroundColor:e.color},size:"small"})},R=function(e){var t=e.isEdit,a=e.category,n=e.setCategory,o=e.categories,c=Object(L.a)();return t?r.a.createElement(_.a,{id:"modal-category",fullWidth:!0,value:a,onChange:function(e,t){t&&t.inputValue?n({title:t.inputValue}):n(t)},filterOptions:function(e,t){var a=c(e,t);return""!==t.inputValue&&a.push({inputValue:t.inputValue,title:'Add "'.concat(t.inputValue,'"')}),a},selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,options:o,getOptionLabel:function(e){return"string"===typeof e?e:e.inputValue?e.inputValue:e.title},renderOption:function(e){return r.a.createElement(W,{id:e.title,title:e.title,color:e.color})},renderInput:function(e){return r.a.createElement(A.a,Object.assign({},e,{label:"Category"}))},freeSolo:!0}):a?r.a.createElement(W,{title:a.title,color:a.color}):null},F=function(e){var t=e.isEdit,a=e.description,n=e.setDescription;return t?r.a.createElement(A.a,{id:"task-input-description",label:"Description",multiline:!0,fullWidth:!0,value:a,onChange:function(e){n(e.target.value)},rows:4}):r.a.createElement(k.a,{className:"task-description",variant:"body2",gutterBottom:!0},a)},M=Object(p.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},content:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},actions:{display:"flex",margin:e.spacing(4,0,0),justifyContent:"space-between"}}})),q=function(e){var t=e.onSave,a=e.open,n=e.onClose,o=e.categories,c=M(),i=r.a.useState(""),l=Object(m.a)(i,2),s=l[0],u=l[1],d=r.a.useState(),b=Object(m.a)(d,2),p=b[0],f=b[1],g=r.a.useState(null),E=Object(m.a)(g,2),k=E[0],y=E[1];return r.a.createElement(S.a,{id:"create-task-modal",className:c.modal,open:a,"aria-labelledby":"modal-title","aria-describedby":"modal-body",disableBackdropClick:!0,disableEscapeKeyDown:!0,onRendered:function(){u(""),y(null)},onClose:n},r.a.createElement("form",{className:c.content,onSubmit:function(e){e.preventDefault(),t(s,k,p)},autoComplete:"off"},r.a.createElement(z,{title:s,setTitle:u,isEdit:!0}),r.a.createElement(R,{isEdit:!0,category:k,setCategory:y,categories:o}),r.a.createElement(F,{isEdit:!0,description:p,setDescription:f}),r.a.createElement("div",{id:"modal-body",className:c.actions},r.a.createElement(v.a,{id:"close-create-task-modal-button",variant:"outlined",color:"secondary",size:"small",startIcon:r.a.createElement(T.a,null),onClick:n},"CANCEL"),r.a.createElement(v.a,{id:"save-create-task-modal-button",variant:"outlined",color:"primary",size:"small",type:"submit",startIcon:r.a.createElement(C.a,null)},"SAVE"))))},P=Object(s.b)((function(e){return{categories:e.categories}}),(function(e){return{onTaskAdded:function(t,a,n){return e(function(e,t,a){return{type:"TASK_ADD_NEW",title:e,category:t,description:a}}(t,a,n))}}}))((function(e){var t=Object(p.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},auth:{marginLeft:"auto"}}})),a=r.a.useState(!1),n=Object(m.a)(a,2),o=n[0],c=n[1],i=t();return r.a.createElement("div",{className:i.root},r.a.createElement(f.a,{position:"static"},r.a.createElement(g.a,null,r.a.createElement(b.b,{to:"/"},r.a.createElement(E.a,{edge:"start",className:i.menuButton,"aria-label":"menu"},r.a.createElement(h.a,{color:"action"}))),r.a.createElement(k.a,{variant:"h6",className:i.title},"Task-Board"),r.a.createElement(E.a,{id:"open-create-task-modal-button",onClick:function(){c(!0)}},r.a.createElement(j.a,null)),r.a.createElement(b.b,{to:"/auth",className:i.auth},r.a.createElement(v.a,null,"Login")))),r.a.createElement("div",null,e.children,o?r.a.createElement(q,{open:o,onClose:function(){c(!1)},onSave:function(t,a,n){e.onTaskAdded(t,a,n),c(!1)},categories:e.categories}):null))})),H=function(){return r.a.createElement("div",null,"Auth")},J=a(193),U=a(192),G=a(87),$=a(111),Q=a(82);function X(){var e=Object($.a)(["query initStates { states { id name index } }"]);return X=function(){return e},e}var Y=Object(Q.b)(X()),Z=a(25),ee=a(187),te=a(188),ae=a(189),ne=a(190),re=a(191),oe=a(116),ce=a.n(oe),ie=a(201),le=a(114),se=a.n(le),ue=a(115),de=a.n(ue),me=a(80),be=a.n(me),pe=function(e){var t=r.a.useState(!1),a=Object(m.a)(t,2),n=a[0],o=a[1],c=r.a.useState(e.task.title),i=Object(m.a)(c,2),l=i[0],s=i[1],u=r.a.useState(e.task.category?e.task.category:""),d=Object(m.a)(u,2),b=d[0],f=d[1],g=r.a.useState(e.task.description),y=Object(m.a)(g,2),h=y[0],O=y[1],j=r.a.useState(!1),S=Object(m.a)(j,2),x=S[0],w=S[1],A=["rgb(242, 11, 11)","rgb(242, 119, 11)","rgb(242, 238, 11)","rgb(94, 242, 11)"],N=Object(ie.a)({item:{type:"task",id:e.task.id},collect:function(e){return{opacity:e.isDragging()?.5:1}}}),D=Object(m.a)(N,2),V=D[0].opacity,B=D[1],L=Object(p.a)({root:{padding:"24px",maxWidth:"250"},card:{boxShadow:"2px 2px 1px 1px ".concat(A[e.task.state],",1px 1px 1px 1px ").concat(A[e.task.state],",0px 1px 10px 1px ").concat(A[e.task.state])},cardActions:{width:"100%",justifyContent:"space-between"},cardAction:{marginLeft:"auto"},CreatedLabel:{marginInlineStart:"8px"},dragIcon:{cursor:"grab"},resize:{fontSize:35}})(),_=r.a.createElement(z,{title:l,setTitle:s,setIsEdit:o,isEdit:n,showError:x}),K=r.a.createElement(R,{category:b,setCategory:f,categories:e.categories,isEdit:n}),W=r.a.createElement(F,{isEdit:n,description:h,setDescription:O}),M=n?r.a.createElement(I.a,{display:"flex",className:L.cardActions},r.a.createElement(v.a,{id:"close-create-task-modal-button",variant:"outlined",color:"secondary",size:"small",onClick:function(){s(e.task.title),f(e.task.category),O(e.task.description),w(!1),o(!1)},startIcon:r.a.createElement(T.a,null)},"CANCEL"),r.a.createElement(v.a,{id:"save-create-task-modal-button",variant:"outlined",color:"primary",size:"small",onClick:function(){if(l){var t=Object(Z.a)(Object(Z.a)({},e.task),{},{title:l,category:b,description:h});e.onSave(t),w(!1),o(!1)}else w(!0)},startIcon:r.a.createElement(C.a,null)},"SAVE")):r.a.createElement(I.a,{display:"flex",className:L.cardActions},r.a.createElement(E.a,{onClick:function(){return e.moveTask(e.task.id,e.task.state-1)},id:"move-task-backward"},r.a.createElement(se.a,null)),r.a.createElement(E.a,{className:L.cardAction,onClick:function(){return e.moveTask(e.task.id,e.task.state+1)},id:"move-task-forward"},r.a.createElement(de.a,null)));return r.a.createElement(ee.a,{className:L.root,ref:B,style:{opacity:V}},r.a.createElement(te.a,{className:L.card},r.a.createElement(ae.a,{action:n?null:r.a.createElement(ce.a,{className:L.dragIcon}),title:_,subheader:r.a.createElement(I.a,{display:"flex"},K,r.a.createElement(k.a,{className:L.CreatedLabel,variant:"caption",display:"block",gutterBottom:!0},n?null:be()(e.task.createdAt).fromNow()))}),r.a.createElement(ne.a,null,W),r.a.createElement(re.a,null,M)))},fe=a(202),ge=function(e){var t=Object(p.a)({column:{display:"flex",flexFlow:"column",minHeight:"100vh"},header:{boxShadow:"0 2px 3px #ccc"},body:{boxShadow:"0 2px 3px #ccc",flex:"1 1 auto"}}),a=Object(fe.a)({accept:"task",drop:function(t){return e.moveTask(t.id,e.state)},collect:function(e){return{isOver:!!e.isOver()}}}),n=Object(m.a)(a,2)[1],o=t(),c=e.tasks.map((function(t){return r.a.createElement(pe,{task:t,key:t.id,moveTask:e.moveTask,categories:e.categories,onSave:e.onSave})})).reduce((function(e,t){return e.concat(t)}),[]);return r.a.createElement(U.a,{item:!0,xs:!0,className:o.column},r.a.createElement(I.a,{className:o.header,borderRight:e.borderRight?1:0,borderBottom:1,borderLeft:1,borderTop:1},r.a.createElement(k.a,{align:"center"},e.title)),r.a.createElement(I.a,{ref:n,className:o.body,borderRight:e.borderRight?1:0,borderBottom:1,borderLeft:1},c))},Ee=Object(s.b)((function(e){return{tasks:e.tasks,states:e.states,categories:e.categories}}),(function(e){return{onTaskMoved:function(t,a){return e(function(e,t){return{type:"TASK_MOVE",id:e,newState:t}}(t,a))},onSaved:function(t){return e(function(e){return{type:"TASK_UPDATE",task:e}}(t))},initStates:function(t){return e(function(e){return{type:"INIT_STATES",states:e}}(t))}}}))((function(e){var t=Object(G.a)(Y),a=t.loading,o=t.error,c=t.data;Object(n.useEffect)((function(){a||o||e.initStates(c.states)}));var i=e.states.map((function(t,a){var n=e.tasks.filter((function(e){return e.state===t.index}));return r.a.createElement(ge,{key:a,title:t.name,state:t.index,borderRight:a+1===e.states.length,tasks:n,categories:e.categories,onSave:function(t){return e.onSaved(t)},moveTask:function(t,a){return e.onTaskMoved(t,a)}})})).reduce((function(e,t){return e.concat(t)}),[]);return r.a.createElement("div",null,a?r.a.createElement(J.a,null):r.a.createElement(U.a,{container:!0,spacing:0,id:"dashboard"},i))})),ke=new Q.a({uri:"http://localhost:4000/graphql"});var ve=function(){return r.a.createElement(d.a,{client:ke},r.a.createElement(P,null,r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/auth",exact:!0,component:H}),r.a.createElement(u.a,{path:"/",exact:!0,component:Ee}))))},ye=a(65),he={tasks:[],states:[],categories:[],categoriesColors:["#FF331F","#3626A7","#9c27b0","#673ab7","#009688","#4caf50","#ffeb3b","#ff9800","#795548"]},Oe=function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,n=arguments.length>1?arguments[1]:void 0,r=[];switch(n.type){case"TASK_ADD_NEW":if((null===(e=n.category)||void 0===e?void 0:e.title)&&!(null===(t=n.category)||void 0===t?void 0:t.color))var o={title:n.category.title,color:a.categoriesColors[0]};var c={title:n.title,id:Math.random(),state:0,createdAt:be()(),category:o||n.category,description:n.description};return Object(Z.a)(Object(Z.a)({},a),{},{tasks:a.tasks.concat(c),categories:o?a.categories.concat(o):Object(ye.a)(a.categories),categoriesColors:o?a.categoriesColors.filter((function(e,t){return t>0})):Object(ye.a)(a.categoriesColors)});case"TASK_MOVE":return n.newState<0||n.newState+1>a.states.length?a:(r=a.tasks.map((function(e){return e.id!==n.id?e:Object(Z.a)(Object(Z.a)({},e),{},{state:n.newState})})),Object(Z.a)(Object(Z.a)({},a),{},{tasks:r}));case"TASK_UPDATE":var i=null;return r=a.tasks.map((function(e){if(e.id!==n.task.id)return e;return n.task.category&&n.task.category&&!n.task.category.color&&(i={title:n.task.category.title,color:a.categoriesColors[0]}),Object(Z.a)(Object(Z.a)({},n.task),{},{category:i||null})})),Object(Z.a)(Object(Z.a)({},a),{},{tasks:r,categories:i?a.categories.concat(i):Object(ye.a)(a.categories),categoriesColors:i?a.categoriesColors.filter((function(e,t){return t>0})):Object(ye.a)(a.categoriesColors)});case"INIT_STATES":return Object(Z.a)(Object(Z.a)({},a),{},{states:n.states});default:return a}},je=a(51);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Se=a(118),xe=a(117),Ce=a.n(xe),we=Object(Se.a)({palette:{primary:Ce.a,secondary:{main:"#097df2"}}}),Te=a(196),Ae=a(194),Ne=a(119),Ie=Object(je.b)(Oe),De=r.a.createElement(s.a,{store:Ie},r.a.createElement(Ae.a,{backend:Ne.a},r.a.createElement(b.a,{basename:"/task-board"},r.a.createElement(i.a,{theme:Object(l.a)(we)},r.a.createElement(Te.a,null),r.a.createElement(ve,null)))));c.a.render(De,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[130,1,2]]]);
//# sourceMappingURL=main.0ce1237e.chunk.js.map